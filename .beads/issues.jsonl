{"id":"bd-41v","title":"F01: Config System - Read/write .chorus/config.json","description":"## What\nRead/write .chorus/config.json for persistent settings.\n\n## Acceptance Criteria\n- [ ] Can load config from .chorus/config.json\n- [ ] Returns default config if file doesn't exist\n- [ ] Can save config to file\n- [ ] Creates .chorus/ directory if needed\n- [ ] Validates config structure\n- [ ] 8 tests pass\n\n## Files\n- src/types/config.ts (NEW)\n- src/services/ConfigService.ts (NEW)\n- tests/services/ConfigService.test.ts (NEW)\n\n## Plan\nSee: thoughts/shared/plans/features/F01-config-system.md","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-10T01:23:49.453114+03:00","created_by":"deligoez","updated_at":"2026-01-10T01:29:59.047538+03:00","labels":["critical-path","feature","m1-infrastructure"],"deleted_at":"2026-01-10T01:29:59.047538+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"bd-47p","title":"F08: Signal Parser - Parse \u003cchorus\u003e signals from agent output","description":"## What\nParse \u003cchorus\u003e signals from agent output.\n\n## Acceptance Criteria\n- [ ] Parses COMPLETE, BLOCKED, PROGRESS signals\n- [ ] Returns null for no signal\n- [ ] isComplete(), isBlocked() helpers\n- [ ] getProgress() returns number\n- [ ] getReason() extracts reason text\n- [ ] 10 tests pass\n\n## Files\n- src/types/signal.ts (NEW)\n- src/services/SignalParser.ts (NEW)\n- tests/services/SignalParser.test.ts (NEW)\n\n## Plan\nSee: thoughts/shared/plans/features/F08-signal-parser.md","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-10T01:24:46.721297+03:00","created_by":"deligoez","updated_at":"2026-01-10T01:29:59.047538+03:00","labels":["critical-path","feature","m2-agent-prep"],"deleted_at":"2026-01-10T01:29:59.047538+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"bd-bin","title":"F02: State System - Runtime state in .chorus/state.json","description":"## What\nManage runtime state in .chorus/state.json (transient, gitignored).\n\n## Acceptance Criteria\n- [ ] Can initialize new session state\n- [ ] Can load existing state for recovery\n- [ ] Can add/update/remove agents from state\n- [ ] Can manage merge queue\n- [ ] Persists changes with debounce (100ms)\n- [ ] clear() removes state file\n- [ ] 8 tests pass\n\n## Files\n- src/types/state.ts (NEW)\n- src/services/StateService.ts (NEW)\n- tests/services/StateService.test.ts (NEW)\n\n## Plan\nSee: thoughts/shared/plans/features/F02-state-system.md","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-10T01:23:57.385137+03:00","created_by":"deligoez","updated_at":"2026-01-10T01:29:59.047538+03:00","labels":["critical-path","feature","m1-infrastructure"],"deleted_at":"2026-01-10T01:29:59.047538+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"bd-bxq","title":"F09: Agent-Task Linking - Associate agent with task ID","description":"## What\nAssociate spawned agents with task IDs, track in store and state.\n\n## Acceptance Criteria\n- [ ] Agent type includes taskId, agentType, worktree, branch\n- [ ] getAgentByTaskId() finds correct agent\n- [ ] getAgentsByType() filters correctly\n- [ ] incrementIteration() updates count\n- [ ] 5 tests pass\n\n## Files\n- src/types/agent.ts (extend)\n- src/stores/agentStore.ts (extend)\n- tests/stores/agentStore.test.ts (extend)\n\n## Plan\nSee: thoughts/shared/plans/features/F09-agent-task-linking.md","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-10T01:24:54.82499+03:00","created_by":"deligoez","updated_at":"2026-01-10T01:29:59.047538+03:00","labels":["critical-path","feature","m2-agent-prep"],"deleted_at":"2026-01-10T01:29:59.047538+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"bd-d7v","title":"F07: Prompt Builder - Build agent prompts with task context","description":"## What\nBuild agent prompts with task context, acceptance criteria, signal protocol.\n\n## Acceptance Criteria\n- [ ] Generates prompt with task description\n- [ ] Includes acceptance criteria (or default)\n- [ ] Includes completion protocol with signal\n- [ ] Claude: no extra injection\n- [ ] Codex/OpenCode: includes AGENTS.md + learnings\n- [ ] 8 tests pass\n\n## Files\n- src/services/PromptBuilder.ts (NEW)\n- tests/services/PromptBuilder.test.ts (NEW)\n\n## Plan\nSee: thoughts/shared/plans/features/F07-prompt-builder.md","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-10T01:24:46.64524+03:00","created_by":"deligoez","updated_at":"2026-01-10T01:29:59.047538+03:00","labels":["critical-path","feature","m2-agent-prep"],"deleted_at":"2026-01-10T01:29:59.047538+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"bd-hix","title":"F06: Worktree Service Complete - Full lifecycle management","description":"## What\nComplete worktree lifecycle: create, list, query, remove.\n\n## Acceptance Criteria\n- [ ] All F04 create tests pass\n- [ ] All F05 cleanup tests pass\n- [ ] list() returns all agent worktrees\n- [ ] getInfo() returns complete info\n- [ ] removeAll() cleans up everything\n- [ ] 4 additional tests (14 total)\n\n## Files\n- src/services/WorktreeService.ts (finalize)\n- tests/services/WorktreeService.test.ts (complete)\n\n## Plan\nSee: thoughts/shared/plans/features/F06-worktree-service.md","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-10T01:24:27.012325+03:00","created_by":"deligoez","updated_at":"2026-01-10T01:29:59.047538+03:00","labels":["critical-path","feature","m1-infrastructure"],"deleted_at":"2026-01-10T01:29:59.047538+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"bd-jez","title":"F05: Worktree Cleanup - git worktree remove after merge","description":"## What\nRemove git worktrees after merge.\n\n## Acceptance Criteria\n- [ ] Removes worktree directory\n- [ ] Deletes branch if merged to main\n- [ ] Keeps branch if not merged (warning)\n- [ ] Force option for uncommitted changes\n- [ ] Throws if worktree doesn't exist\n- [ ] 5 tests pass\n\n## Files\n- src/services/WorktreeService.ts (extend)\n- tests/services/WorktreeService.test.ts (extend)\n\n## Plan\nSee: thoughts/shared/plans/features/F05-worktree-cleanup.md","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-10T01:24:18.998566+03:00","created_by":"deligoez","updated_at":"2026-01-10T01:29:59.047538+03:00","labels":["critical-path","feature","m1-infrastructure"],"deleted_at":"2026-01-10T01:29:59.047538+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"bd-mdv","title":"F04: Worktree Create - git worktree add for agent isolation","description":"## What\nCreate git worktrees for agent isolation.\n\n## Acceptance Criteria\n- [ ] Creates worktree at .worktrees/{agent}-{task}\n- [ ] Creates branch agent/{agent}/{task} from main\n- [ ] Creates .worktrees/ directory if needed\n- [ ] Throws if worktree already exists\n- [ ] Returns correct WorktreeInfo\n- [ ] 5 tests pass\n\n## Files\n- src/services/WorktreeService.ts (NEW - partial)\n- tests/services/WorktreeService.test.ts (NEW)\n\n## Plan\nSee: thoughts/shared/plans/features/F04-worktree-create.md","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-10T01:24:04.989699+03:00","created_by":"deligoez","updated_at":"2026-01-10T01:29:59.047538+03:00","labels":["critical-path","feature","m1-infrastructure"],"deleted_at":"2026-01-10T01:29:59.047538+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"bd-uvl","title":"F05: Worktree Remove - Cleanup after merge","description":"## What\nRemove git worktrees after task completion.\n\n## Acceptance Criteria\n- [ ] remove() runs: git worktree remove {path}\n- [ ] Deletes branch if merged to main\n- [ ] Keeps branch if not merged (logs warning)\n- [ ] force option for uncommitted changes\n- [ ] 5 tests pass\n\n## Files\n- src/services/WorktreeService.ts (extend)\n- tests/services/WorktreeService.test.ts (extend)\n\n## Test Cases\n1. remove() deletes worktree dir\n2. remove() deletes merged branch\n3. remove() keeps unmerged branch\n4. remove() with force works\n5. remove() throws if not exists","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-10T01:31:03.293979+03:00","created_by":"deligoez","updated_at":"2026-01-10T01:31:30.582217+03:00","labels":["critical-path","feature","m1-infrastructure"],"deleted_at":"2026-01-10T01:31:30.582217+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"ch-001","title":"Write hello to test.txt","description":"Create test.txt and write 'Hello from Chorus!'","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-10T01:23:14.777764+03:00","updated_at":"2026-01-10T01:47:09.417655+03:00","deleted_at":"2026-01-10T01:47:09.417655+03:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"ch-002","title":"Count to 10","description":"Print numbers 1 to 10","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-10T01:23:14.777764+03:00","updated_at":"2026-01-10T01:47:09.485954+03:00","deleted_at":"2026-01-10T01:47:09.485954+03:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"ch-003","title":"Show current date","status":"tombstone","priority":3,"issue_type":"task","assignee":"agent-1","created_at":"2026-01-10T01:23:14.777764+03:00","updated_at":"2026-01-10T01:47:09.553706+03:00","deleted_at":"2026-01-10T01:47:09.553706+03:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"ch-0e7","title":"F15: Orchestrator Core - Central coordinator for task assignment","description":"## What\nCentral coordinator: task selection → worktree creation → prompt building → agent spawning → tracking.\n\n## Acceptance Criteria\n- [ ] Creates worktree for new assignment\n- [ ] Claims task via bd update\n- [ ] Builds correct prompt for agent type\n- [ ] Spawns agent in worktree directory\n- [ ] Passes environment variables\n- [ ] Applies model override if specified\n- [ ] Validates task is assignable\n- [ ] Checks max parallel agents\n- [ ] Checks dependencies (basic)\n- [ ] Emits events for tracking\n- [ ] 15 tests pass\n\n## Files\n- src/services/Orchestrator.ts (NEW)\n- src/types/orchestration.ts (NEW)\n- tests/services/Orchestrator.test.ts (NEW)\n\n## Plan\nSee: thoughts/shared/plans/features/F15-orchestrator-core.md","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T01:47:53.010882+03:00","created_by":"deligoez","updated_at":"2026-01-10T01:47:53.010882+03:00","labels":["critical-path","feature","m4-orchestration"],"dependencies":[{"issue_id":"ch-0e7","depends_on_id":"ch-iel","type":"blocks","created_at":"2026-01-10T01:47:53.01358+03:00","created_by":"deligoez"},{"issue_id":"ch-0e7","depends_on_id":"ch-wk8","type":"blocks","created_at":"2026-01-10T01:47:53.015317+03:00","created_by":"deligoez"},{"issue_id":"ch-0e7","depends_on_id":"ch-3y0","type":"blocks","created_at":"2026-01-10T01:47:53.016714+03:00","created_by":"deligoez"},{"issue_id":"ch-0e7","depends_on_id":"ch-zqi","type":"blocks","created_at":"2026-01-10T01:47:53.01801+03:00","created_by":"deligoez"}]}
{"id":"ch-112","title":"F05: Worktree Remove - Cleanup after merge","description":"## What\nRemove git worktrees after task completion.\n\n## Acceptance Criteria\n- [ ] remove() runs: git worktree remove {path}\n- [ ] Deletes branch if merged to main\n- [ ] Keeps branch if not merged (logs warning)\n- [ ] force option for uncommitted changes\n- [ ] 5 tests pass\n\n## Files\n- src/services/WorktreeService.ts (extend)\n- tests/services/WorktreeService.test.ts (extend)\n\n## Test Cases\n1. remove() deletes worktree dir\n2. remove() deletes merged branch\n3. remove() keeps unmerged branch\n4. remove() with force works\n5. remove() throws if not exists","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T01:31:10.574386+03:00","created_by":"deligoez","updated_at":"2026-01-10T01:46:57.276316+03:00","labels":["critical-path","feature","m1-infrastructure"],"dependencies":[{"issue_id":"ch-112","depends_on_id":"ch-glq","type":"blocks","created_at":"2026-01-10T01:31:10.576808+03:00","created_by":"deligoez"}]}
{"id":"ch-2n6","title":"F01a: Config Types - ChorusConfig interface and defaults","description":"## What\nDefine TypeScript types for Chorus configuration.\n\n## Acceptance Criteria\n- [ ] ChorusConfig interface with all fields\n- [ ] AgentConfig interface\n- [ ] getDefaults() returns complete default config\n- [ ] 3 tests pass\n\n## Files\n- src/types/config.ts (NEW)\n\n## Implementation\n```typescript\nexport interface ChorusConfig {\n  version: string;\n  mode: 'semi-auto' | 'autopilot';\n  agents: { default: string; maxParallel: number; available: Record\u003cstring, AgentConfig\u003e };\n  project: { testCommand: string; buildCommand?: string };\n  completion: { signal: string; requireTests: boolean; maxIterations: number; taskTimeout: number };\n  merge: { autoResolve: boolean; agentResolve: boolean; requireApproval: boolean };\n  tui: { agentGrid: 'auto' | string };\n}\n\nexport function getDefaultConfig(): ChorusConfig { ... }\n```\n\n## Test Cases\n1. getDefaultConfig returns valid ChorusConfig\n2. Default mode is 'semi-auto'\n3. Default agent is 'claude'","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T01:30:10.093924+03:00","created_by":"deligoez","updated_at":"2026-01-10T01:46:57.281088+03:00","labels":["critical-path","feature","m1-infrastructure"]}
{"id":"ch-3y0","title":"F09: Agent-Task Linking - Track agent-task association","description":"## What\nAssociate spawned agents with task IDs and track in agentStore.\n\n## Acceptance Criteria\n- [ ] Agent type includes taskId, agentType, worktree, branch\n- [ ] Agent type includes iteration, startedAt\n- [ ] getAgentByTaskId() finds correct agent\n- [ ] getAgentsByType() filters correctly\n- [ ] incrementIteration() updates count\n- [ ] 5 tests pass\n\n## Files\n- src/types/agent.ts (UPDATE - add fields)\n- src/stores/agentStore.ts (UPDATE - add actions)\n- tests/stores/agentStore.test.ts (UPDATE - add tests)\n\n## Plan\nSee: thoughts/shared/plans/features/F09-agent-task-linking.md","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T01:38:24.319933+03:00","created_by":"deligoez","updated_at":"2026-01-10T01:46:57.274064+03:00","labels":["critical-path","feature","m2-agent-prep"],"dependencies":[{"issue_id":"ch-3y0","depends_on_id":"ch-81x","type":"blocks","created_at":"2026-01-10T01:47:32.962262+03:00","created_by":"deligoez"}]}
{"id":"ch-7gx","title":"F17: Semi-Auto Mode - User-initiated single task execution","description":"## What\nSemi-auto mode: user selects task → one agent runs → completes → STOP (wait for next selection).\n\n## Acceptance Criteria\n- [ ] Can start task by ID\n- [ ] Rejects if already running a task\n- [ ] Tracks current task and agent\n- [ ] Handles successful completion\n- [ ] Handles retry (respawn agent)\n- [ ] Handles failure (max iterations)\n- [ ] Can cancel running task\n- [ ] Emits appropriate events\n- [ ] 8 tests pass\n\n## Files\n- src/services/SemiAutoController.ts (NEW)\n- tests/services/SemiAutoController.test.ts (NEW)\n\n## Dependencies\n- F15 (Orchestrator Core) - for assignTask\n- F16b (Completion Handler) - for completion events\n\n## Plan\nSee: thoughts/shared/plans/features/F17-semi-auto-mode.md","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T02:07:06.427237+03:00","created_by":"deligoez","updated_at":"2026-01-10T02:07:06.427237+03:00","labels":["critical-path","feature","m4-orchestration"],"dependencies":[{"issue_id":"ch-7gx","depends_on_id":"ch-0e7","type":"blocks","created_at":"2026-01-10T02:07:06.429867+03:00","created_by":"deligoez"},{"issue_id":"ch-7gx","depends_on_id":"ch-lhm","type":"blocks","created_at":"2026-01-10T02:07:06.431531+03:00","created_by":"deligoez"}]}
{"id":"ch-7ju","title":"F14: Dependency Resolver - Check task dependencies","description":"## What\nCheck if task dependencies are satisfied before assignment.\n\n## Acceptance Criteria\n- [ ] Returns satisfied=true when no dependencies\n- [ ] Returns satisfied=true when all deps closed\n- [ ] Returns pending deps that are open\n- [ ] Returns inProgress deps\n- [ ] Returns failed for missing deps\n- [ ] Can get direct dependencies\n- [ ] Can detect circular dependencies\n- [ ] 8 tests pass\n\n## Files\n- src/services/DependencyResolver.ts (NEW)\n- tests/services/DependencyResolver.test.ts (NEW)\n\n## Dependencies\n- F12 (Task Claimer) - uses BeadsCLI\n\n## Plan\nSee: thoughts/shared/plans/features/F14-dependency-resolver.md","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T02:06:33.869228+03:00","created_by":"deligoez","updated_at":"2026-01-10T02:06:33.869228+03:00","labels":["critical-path","feature","m4-orchestration"],"dependencies":[{"issue_id":"ch-7ju","depends_on_id":"ch-zqi","type":"blocks","created_at":"2026-01-10T02:06:33.87357+03:00","created_by":"deligoez"}]}
{"id":"ch-7jw","title":"F16a: Completion Handler - Success path handling","description":"## What\nHandle successful task completion: detect signal + tests pass → close task → emit events.\n\n## Acceptance Criteria\n- [ ] Detects successful completion (signal + tests)\n- [ ] Closes task on success via BeadsCLI\n- [ ] Emits \"completed\" event\n- [ ] Emits \"readyForMerge\" event\n- [ ] Returns TaskCompletionResult\n- [ ] 5 tests pass\n\n## Files\n- src/services/CompletionHandler.ts (NEW - partial)\n- tests/services/CompletionHandler.test.ts (NEW)\n\n## Dependencies\n- F11 (Completion Checker) - uses for signal+test check\n- F13 (Task Closer) - uses BeadsCLI.closeTask\n\n## Plan\nSee: thoughts/shared/plans/features/F16-single-task-completion.md","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T02:06:42.739971+03:00","created_by":"deligoez","updated_at":"2026-01-10T02:06:42.739971+03:00","labels":["critical-path","feature","m4-orchestration"],"dependencies":[{"issue_id":"ch-7jw","depends_on_id":"ch-uoa","type":"blocks","created_at":"2026-01-10T02:06:42.742454+03:00","created_by":"deligoez"},{"issue_id":"ch-7jw","depends_on_id":"ch-dzz","type":"blocks","created_at":"2026-01-10T02:06:42.744143+03:00","created_by":"deligoez"}]}
{"id":"ch-81x","title":"F02b: State Init/Load - Initialize or recover session state","description":"## What\nInitialize new state or load existing for recovery.\n\n## Acceptance Criteria\n- [ ] init() creates fresh state with UUID sessionId\n- [ ] load() returns existing state or null\n- [ ] get() returns current state\n- [ ] 4 tests pass\n\n## Files\n- src/services/StateService.ts (NEW - partial)\n- tests/services/StateService.test.ts (NEW)\n\n## Test Cases\n1. init() generates unique sessionId\n2. init() sets startedAt timestamp\n3. load() returns null if no file\n4. load() parses existing state","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T01:30:50.906489+03:00","created_by":"deligoez","updated_at":"2026-01-10T01:46:57.278717+03:00","labels":["critical-path","feature","m1-infrastructure"],"dependencies":[{"issue_id":"ch-81x","depends_on_id":"ch-ah6","type":"blocks","created_at":"2026-01-10T01:30:50.908184+03:00","created_by":"deligoez"}]}
{"id":"ch-8j3","title":"F19: Orchestration Store - Zustand state management","description":"## What\nZustand store for orchestration state: mode, status, current task, stats.\n\n## Acceptance Criteria\n- [ ] Tracks operating mode (semi-auto/autopilot)\n- [ ] Tracks orchestration status (idle/running/etc)\n- [ ] Tracks current task assignment\n- [ ] Tracks iteration count\n- [ ] Records completion stats (success/failed)\n- [ ] Supports autopilot pause state\n- [ ] reset() clears all state\n- [ ] 8 tests pass\n\n## Files\n- src/stores/orchestrationStore.ts (NEW)\n- tests/stores/orchestrationStore.test.ts (NEW)\n\n## Dependencies\n- None (independent state store)\n\n## Plan\nSee: thoughts/shared/plans/features/F19-orchestration-store.md","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T02:07:35.161308+03:00","created_by":"deligoez","updated_at":"2026-01-10T02:07:35.161308+03:00","labels":["feature","m4-orchestration"]}
{"id":"ch-9fq","title":"F18a: useTaskSelection Hook - Task navigation and selection","description":"## What\nReact hook for task selection: up/down navigation, selection state, assign action.\n\n## Acceptance Criteria\n- [ ] Can select task by ID\n- [ ] selectNext cycles through ready tasks\n- [ ] selectPrevious cycles backwards\n- [ ] Navigation skips blocked tasks\n- [ ] canAssign true when idle + selected\n- [ ] canAssign false when running\n- [ ] 4 tests pass\n\n## Files\n- src/hooks/useTaskSelection.ts (NEW)\n- tests/hooks/useTaskSelection.test.ts (NEW)\n\n## Dependencies\n- F17 (Semi-Auto Mode) - for assignment capability\n\n## Plan\nSee: thoughts/shared/plans/features/F18-task-selection-ui.md","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T02:07:14.369577+03:00","created_by":"deligoez","updated_at":"2026-01-10T02:07:14.369577+03:00","labels":["feature","m4-orchestration"],"dependencies":[{"issue_id":"ch-9fq","depends_on_id":"ch-7gx","type":"blocks","created_at":"2026-01-10T02:07:14.372007+03:00","created_by":"deligoez"}]}
{"id":"ch-ah6","title":"F02a: State Types - ChorusState interface and SessionStats","description":"## What\nDefine TypeScript types for runtime state.\n\n## Acceptance Criteria\n- [ ] ChorusState interface\n- [ ] AgentState interface  \n- [ ] MergeQueueItem interface\n- [ ] SessionStats interface\n- [ ] 2 tests pass\n\n## Files\n- src/types/state.ts (NEW)\n\n## Interfaces\n- ChorusState: version, sessionId, mode, paused, agents, mergeQueue, checkpoint, stats\n- AgentState: id, type, pid, taskId, worktree, branch, iteration, startedAt, status\n- MergeQueueItem: taskId, branch, worktree, priority, status, retries, enqueuedAt\n- SessionStats: tasksCompleted, tasksFailed, mergesAuto, mergesManual, totalIterations\n\n## Test Cases\n1. Types compile without errors\n2. Example state object is valid","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T01:30:38.527356+03:00","created_by":"deligoez","updated_at":"2026-01-10T01:46:57.279318+03:00","labels":["critical-path","feature","m1-infrastructure"]}
{"id":"ch-cg0","title":"F02c: State Agent Ops - Add/update/remove agents","description":"## What\nManage agents in state.\n\n## Acceptance Criteria\n- [ ] addAgent() adds to state.agents\n- [ ] updateAgent() modifies existing\n- [ ] removeAgent() deletes from state\n- [ ] getAgent() retrieves by id\n- [ ] 4 tests pass\n\n## Test Cases\n1. addAgent stores agent\n2. updateAgent modifies fields\n3. removeAgent deletes agent\n4. getAgent returns undefined for missing","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T01:30:50.982849+03:00","created_by":"deligoez","updated_at":"2026-01-10T01:46:57.278139+03:00","labels":["critical-path","feature","m1-infrastructure"],"dependencies":[{"issue_id":"ch-cg0","depends_on_id":"ch-ah6","type":"blocks","created_at":"2026-01-10T01:30:50.984583+03:00","created_by":"deligoez"},{"issue_id":"ch-cg0","depends_on_id":"ch-81x","type":"blocks","created_at":"2026-01-10T01:37:13.386589+03:00","created_by":"deligoez"}]}
{"id":"ch-dzz","title":"F13: Task Closer - Mark tasks as closed via bd CLI","description":"## What\nClose completed tasks via bd close command.\n\n## Acceptance Criteria\n- [ ] closeTask() runs: bd close \u003cid\u003e\n- [ ] Handles already-closed tasks gracefully\n- [ ] Can add closing comment\n- [ ] Returns success/failure status\n- [ ] 5 tests pass\n\n## Files\n- src/services/BeadsCLI.ts (UPDATE - add closeTask)\n- tests/services/BeadsCLI.test.ts (UPDATE - add tests)\n\n## Dependencies\n- F12 (Task Claimer) - extends BeadsCLI","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T01:39:07.662362+03:00","created_by":"deligoez","updated_at":"2026-01-10T01:46:57.272098+03:00","labels":["critical-path","feature","m3-task-mgmt"],"dependencies":[{"issue_id":"ch-dzz","depends_on_id":"ch-zqi","type":"blocks","created_at":"2026-01-10T01:39:40.054514+03:00","created_by":"deligoez"}]}
{"id":"ch-e7f","title":"F18b: TaskPanel Selection UI - Visual selection in TUI","description":"## What\nUpdate TaskPanel to show selection highlight, Enter key assignment, status icons.\n\n## Acceptance Criteria\n- [ ] Selected task is visually highlighted\n- [ ] Arrow indicator on selected task\n- [ ] Shows \"Press Enter to assign\" when ready\n- [ ] Enter key triggers assignSelected\n- [ ] Shows status icons per task\n- [ ] Shows ready/blocked counts\n- [ ] 4 tests pass\n\n## Files\n- src/components/TaskPanel.tsx (UPDATE)\n- src/components/TaskRow.tsx (NEW)\n- tests/components/TaskPanel.test.tsx (UPDATE)\n\n## Dependencies\n- F18a (useTaskSelection Hook)\n\n## Plan\nSee: thoughts/shared/plans/features/F18-task-selection-ui.md","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T02:07:21.76659+03:00","created_by":"deligoez","updated_at":"2026-01-10T02:07:21.76659+03:00","labels":["feature","m4-orchestration"],"dependencies":[{"issue_id":"ch-e7f","depends_on_id":"ch-9fq","type":"blocks","created_at":"2026-01-10T02:07:21.768899+03:00","created_by":"deligoez"}]}
{"id":"ch-g6z","title":"F20: useOrchestration Hook - TUI orchestration integration","description":"## What\nReact hook connecting TUI components to orchestration services and store.\n\n## Acceptance Criteria\n- [ ] Initializes services on mount\n- [ ] Provides state from orchestration store\n- [ ] Provides startTask action\n- [ ] Provides cancelTask action\n- [ ] Handles service events\n- [ ] Updates store on completion\n- [ ] Computes derived state (isIdle, canStartTask)\n- [ ] 8 tests pass\n\n## Files\n- src/hooks/useOrchestration.ts (NEW)\n- tests/hooks/useOrchestration.test.ts (NEW)\n\n## Dependencies\n- F15 (Orchestrator Core)\n- F16b (Completion Handler)\n- F17 (Semi-Auto Mode)\n- F19 (Orchestration Store)\n\n## Plan\nSee: thoughts/shared/plans/features/F20-use-orchestration.md","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T02:07:43.468053+03:00","created_by":"deligoez","updated_at":"2026-01-10T02:07:43.468053+03:00","labels":["feature","m4-orchestration"],"dependencies":[{"issue_id":"ch-g6z","depends_on_id":"ch-0e7","type":"blocks","created_at":"2026-01-10T02:07:43.470457+03:00","created_by":"deligoez"},{"issue_id":"ch-g6z","depends_on_id":"ch-lhm","type":"blocks","created_at":"2026-01-10T02:07:43.47217+03:00","created_by":"deligoez"},{"issue_id":"ch-g6z","depends_on_id":"ch-7gx","type":"blocks","created_at":"2026-01-10T02:07:43.47353+03:00","created_by":"deligoez"},{"issue_id":"ch-g6z","depends_on_id":"ch-8j3","type":"blocks","created_at":"2026-01-10T02:07:43.474872+03:00","created_by":"deligoez"}]}
{"id":"ch-glq","title":"F04: Worktree Create - git worktree add for isolation","description":"## What\nCreate git worktrees for agent isolation.\n\n## Acceptance Criteria\n- [ ] create() runs: git worktree add .worktrees/{agent}-{task} -b agent/{agent}/{task} main\n- [ ] Creates .worktrees/ directory if needed\n- [ ] Returns WorktreeInfo with path, branch, agentType, taskId\n- [ ] Throws if worktree already exists\n- [ ] 5 tests pass\n\n## Files\n- src/services/WorktreeService.ts (NEW)\n- tests/services/WorktreeService.test.ts (NEW)\n\n## Interface\n```typescript\ninterface WorktreeInfo {\n  path: string;      // .worktrees/claude-bd-a1b2\n  branch: string;    // agent/claude/bd-a1b2\n  agentType: string;\n  taskId: string;\n}\n```\n\n## Test Cases\n1. create() makes worktree directory\n2. create() creates branch from main\n3. create() returns correct WorktreeInfo\n4. create() throws if exists\n5. Creates .worktrees/ if missing","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T01:31:03.217127+03:00","created_by":"deligoez","updated_at":"2026-01-10T01:46:57.276981+03:00","labels":["critical-path","feature","m1-infrastructure"]}
{"id":"ch-iel","title":"F06: Worktree Query - List and get worktree info","description":"## What\nQuery and list worktrees.\n\n## Acceptance Criteria\n- [ ] list() returns all agent worktrees\n- [ ] getInfo() returns WorktreeInfo for specific worktree\n- [ ] exists() checks if worktree exists\n- [ ] 4 tests pass\n\n## Files\n- src/services/WorktreeService.ts (extend)\n- tests/services/WorktreeService.test.ts (extend)\n\n## Test Cases\n1. list() returns empty for no worktrees\n2. list() returns all agent worktrees\n3. getInfo() returns correct info\n4. exists() returns true/false correctly","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T01:31:17.922621+03:00","created_by":"deligoez","updated_at":"2026-01-10T01:46:57.275689+03:00","labels":["critical-path","feature","m1-infrastructure"],"dependencies":[{"issue_id":"ch-iel","depends_on_id":"ch-112","type":"blocks","created_at":"2026-01-10T01:31:17.924367+03:00","created_by":"deligoez"},{"issue_id":"ch-iel","depends_on_id":"ch-glq","type":"blocks","created_at":"2026-01-10T01:47:33.787562+03:00","created_by":"deligoez"}]}
{"id":"ch-k3d","title":"F10: Test Runner - Run project test command","description":"## What\nRun project test command (from config) and capture result.\n\n## Acceptance Criteria\n- [ ] Reads testCommand from ChorusConfig\n- [ ] Runs command in worktree directory\n- [ ] Captures stdout/stderr\n- [ ] Returns success/failure status\n- [ ] Handles command timeout\n- [ ] Parses test count if possible\n- [ ] 8 tests pass\n\n## Files\n- src/services/TestRunner.ts (NEW)\n- tests/services/TestRunner.test.ts (NEW)\n\n## Dependencies\n- F01 (Config System) - needs testCommand from config","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T01:38:49.692278+03:00","created_by":"deligoez","updated_at":"2026-01-10T01:46:57.273449+03:00","labels":["critical-path","feature","m3-task-mgmt"],"dependencies":[{"issue_id":"ch-k3d","depends_on_id":"ch-sro","type":"blocks","created_at":"2026-01-10T01:48:27.569665+03:00","created_by":"deligoez"}]}
{"id":"ch-lhm","title":"F16b: Completion Handler - Retry and failure logic","description":"## What\nHandle retry logic when agent doesn't complete: increment iteration, check max, emit retry/failed events.\n\n## Acceptance Criteria\n- [ ] Handles blocked state detection\n- [ ] Tracks iteration count\n- [ ] Respects maxIterations config\n- [ ] Emits \"retry\" event when under limit\n- [ ] Emits \"failed\" event when max reached\n- [ ] 5 tests pass\n\n## Files\n- src/services/CompletionHandler.ts (UPDATE)\n- tests/services/CompletionHandler.test.ts (UPDATE)\n\n## Dependencies\n- F16a (Completion Handler Success)\n\n## Plan\nSee: thoughts/shared/plans/features/F16-single-task-completion.md","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T02:06:51.093896+03:00","created_by":"deligoez","updated_at":"2026-01-10T02:06:51.093896+03:00","labels":["critical-path","feature","m4-orchestration"],"dependencies":[{"issue_id":"ch-lhm","depends_on_id":"ch-7jw","type":"blocks","created_at":"2026-01-10T02:06:51.096495+03:00","created_by":"deligoez"}]}
{"id":"ch-mpl","title":"F08: Signal Parser - Parse \u003cchorus\u003e signals from output","description":"## What\nParse \u003cchorus\u003e signals from agent output to detect completion, blocking, and other states.\n\n## Acceptance Criteria\n- [ ] Parses \u003cchorus\u003eCOMPLETE\u003c/chorus\u003e\n- [ ] Parses \u003cchorus\u003eBLOCKED: reason\u003c/chorus\u003e\n- [ ] Parses \u003cchorus\u003ePROGRESS: 45\u003c/chorus\u003e\n- [ ] Returns null for no signal\n- [ ] Finds signal anywhere in output\n- [ ] isComplete() helper works\n- [ ] isBlocked() helper works\n- [ ] getProgress() returns number\n- [ ] getReason() extracts reason text\n- [ ] 10 tests pass\n\n## Files\n- src/types/signal.ts (NEW)\n- src/services/SignalParser.ts (NEW)\n- tests/services/SignalParser.test.ts (NEW)\n\n## Plan\nSee: thoughts/shared/plans/features/F08-signal-parser.md","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T01:38:13.856983+03:00","created_by":"deligoez","updated_at":"2026-01-10T01:46:57.274615+03:00","labels":["critical-path","feature","m2-agent-prep"]}
{"id":"ch-r12","title":"F02d: State Persistence - Debounced save and clear","description":"## What\nPersist state to disk with debouncing.\n\n## Acceptance Criteria\n- [ ] save() writes to .chorus/state.json\n- [ ] Debounces rapid saves (100ms)\n- [ ] clear() removes state file\n- [ ] 3 tests pass\n\n## Test Cases\n1. save() creates file\n2. Multiple rapid updates debounced\n3. clear() deletes file","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T01:30:51.05887+03:00","created_by":"deligoez","updated_at":"2026-01-10T01:46:57.277562+03:00","labels":["critical-path","feature","m1-infrastructure"],"dependencies":[{"issue_id":"ch-r12","depends_on_id":"ch-ah6","type":"blocks","created_at":"2026-01-10T01:30:51.060628+03:00","created_by":"deligoez"},{"issue_id":"ch-r12","depends_on_id":"ch-81x","type":"blocks","created_at":"2026-01-10T01:37:14.840129+03:00","created_by":"deligoez"}]}
{"id":"ch-sro","title":"F01b: Config Load - Read config from .chorus/config.json","description":"## What\nLoad configuration from .chorus/config.json file.\n\n## Acceptance Criteria\n- [ ] load() reads and parses JSON file\n- [ ] Returns default config if file doesn't exist\n- [ ] Throws on invalid JSON\n- [ ] Caches loaded config\n- [ ] 4 tests pass\n\n## Files\n- src/services/ConfigService.ts (NEW - partial)\n- tests/services/ConfigService.test.ts (NEW)\n\n## Implementation\n```typescript\nexport class ConfigService {\n  private configPath: string;\n  private config: ChorusConfig | null = null;\n  \n  constructor(projectDir: string) {\n    this.configPath = path.join(projectDir, '.chorus', 'config.json');\n  }\n  \n  load(): ChorusConfig {\n    if (this.config) return this.config;\n    if (\\!fs.existsSync(this.configPath)) {\n      this.config = getDefaultConfig();\n      return this.config;\n    }\n    this.config = JSON.parse(fs.readFileSync(this.configPath, 'utf-8'));\n    return this.config;\n  }\n}\n```\n\n## Test Cases\n1. load() returns defaults when file missing\n2. load() parses existing config file\n3. load() throws on malformed JSON\n4. load() caches result","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T01:30:22.3151+03:00","created_by":"deligoez","updated_at":"2026-01-10T01:46:57.280489+03:00","labels":["critical-path","feature","m1-infrastructure"],"dependencies":[{"issue_id":"ch-sro","depends_on_id":"ch-2n6","type":"blocks","created_at":"2026-01-10T01:30:22.316939+03:00","created_by":"deligoez"}]}
{"id":"ch-uoa","title":"F11: Completion Checker - Detect task completion (signal + tests)","description":"## What\nCheck if agent has completed task using signal detection AND test verification.\n\n## Acceptance Criteria\n- [ ] Detects \u003cchorus\u003eCOMPLETE\u003c/chorus\u003e signal\n- [ ] Runs test command after signal\n- [ ] Returns true only if signal + tests pass\n- [ ] Detects \u003cchorus\u003eBLOCKED\u003c/chorus\u003e signal\n- [ ] Detects \u003cchorus\u003eNEEDS_HELP\u003c/chorus\u003e signal\n- [ ] Handles missing signal gracefully\n- [ ] Handles test failure after signal\n- [ ] Configurable via config.completion.requireTests\n- [ ] 10 tests pass\n\n## Files\n- src/services/CompletionChecker.ts (NEW)\n- tests/services/CompletionChecker.test.ts (NEW)\n\n## Dependencies\n- F08 (Signal Parser) - parses signals from output\n- F10 (Test Runner) - runs tests to verify","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T01:38:59.126542+03:00","created_by":"deligoez","updated_at":"2026-01-10T01:46:57.27279+03:00","labels":["critical-path","feature","m3-task-mgmt"],"dependencies":[{"issue_id":"ch-uoa","depends_on_id":"ch-mpl","type":"blocks","created_at":"2026-01-10T01:38:59.129353+03:00","created_by":"deligoez"},{"issue_id":"ch-uoa","depends_on_id":"ch-k3d","type":"blocks","created_at":"2026-01-10T01:38:59.130889+03:00","created_by":"deligoez"}]}
{"id":"ch-wk8","title":"F07: Prompt Builder - Build task prompts with context","description":"## What\nBuild agent prompts with task context, acceptance criteria, and Chorus signal protocol.\n\n## Acceptance Criteria\n- [ ] Generates prompt with task description\n- [ ] Includes acceptance criteria (or default)\n- [ ] Includes completion protocol with signal\n- [ ] Includes branch/context info\n- [ ] Claude: no extra injection\n- [ ] Codex/OpenCode: includes AGENTS.md\n- [ ] Codex/OpenCode: includes learnings if available\n- [ ] 8 tests pass\n\n## Files\n- src/services/PromptBuilder.ts (NEW)\n- tests/services/PromptBuilder.test.ts (NEW)\n\n## Plan\nSee: thoughts/shared/plans/features/F07-prompt-builder.md","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T01:38:04.926365+03:00","created_by":"deligoez","updated_at":"2026-01-10T01:46:57.275188+03:00","labels":["critical-path","feature","m2-agent-prep"]}
{"id":"ch-y43","title":"F01c: Config Save - Write config to file with validation","description":"## What\nSave configuration to .chorus/config.json with validation.\n\n## Acceptance Criteria\n- [ ] save() writes config to file\n- [ ] Creates .chorus/ directory if needed\n- [ ] validate() checks required fields\n- [ ] Rejects invalid config with clear error\n- [ ] 4 tests pass\n\n## Files\n- src/services/ConfigService.ts (extend)\n- tests/services/ConfigService.test.ts (extend)\n\n## Test Cases\n1. save() creates directory if missing\n2. save() writes formatted JSON\n3. validate() accepts valid config\n4. validate() rejects invalid mode","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T01:30:30.340211+03:00","created_by":"deligoez","updated_at":"2026-01-10T01:46:57.279891+03:00","labels":["critical-path","feature","m1-infrastructure"],"dependencies":[{"issue_id":"ch-y43","depends_on_id":"ch-sro","type":"blocks","created_at":"2026-01-10T01:30:30.342251+03:00","created_by":"deligoez"}]}
{"id":"ch-zqi","title":"F12: Task Claimer - Claim tasks via bd CLI","description":"## What\nMark tasks as in_progress and assign to agent via bd CLI.\n\n## Acceptance Criteria\n- [ ] claimTask() runs: bd update \u003cid\u003e --status=in_progress --assignee=\u003cagent\u003e\n- [ ] getTask() returns task by ID\n- [ ] getReadyTasks() returns ready tasks\n- [ ] isAvailable() checks bd installation\n- [ ] isInitialized() checks bd init status\n- [ ] 5 tests pass\n\n## Files\n- src/services/BeadsCLI.ts (NEW)\n- tests/services/BeadsCLI.test.ts (NEW)\n\n## Plan\nSee: thoughts/shared/plans/features/F12-task-claimer.md","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T01:39:31.364679+03:00","created_by":"deligoez","updated_at":"2026-01-10T01:46:57.271232+03:00","labels":["critical-path","feature","m3-task-mgmt"]}
